{% load static %}
{% load l10n %}
{% load humanize %}
{% load string_utils %}
{% load date_utils_tag %}


<html>
    <head>
        <script src="{% static 'js/jquery-3.6.0.min.js' %}"></script>
        <script src="{% static 'js/bootstrap.bundle.js' %}"></script>
        <script src="{% static 'js/halaman_toko_component.js' %}"></script>
        <script src="{% static 'fontawesome 5.15/js/all.min.js' %}"></script>
        <script src="{% static 'fontawesome 5.15/attribution.js' %}"></script>

        <link rel="stylesheet" href="{% static 'fonts/tisa/style.css' %}" />
        <link rel="stylesheet" type="text/css" href="{% static 'fonts/Quicksand/style-regular.css' %}" />
        <link rel="stylesheet" type="text/css" href="{% static 'fonts/Quicksand/style-bold.css' %}" />
{#        <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Quicksand" />#}

        <link rel="stylesheet" href="{% static 'fontawesome 5.15/css/all.min.css' %}"/>
        <link rel="stylesheet" href="{% static 'css/bootstrap.css' %}"/>
        <link rel="stylesheet" href="{% static 'css/halaman_toko_layout.css' %}"/>
        <link rel="stylesheet" href="{% static 'css/halaman_toko_component.css' %}"/>

        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>{{ company.nama_merek }}</title>
    </head>
    <body>
        <script>
            company_id = {{ company.id }};
            csrf_token = "{{ csrf_token  }}";
        </script>

        <div id="content">
            <div id="head">
                <div id="nama-toko-dan-perusahaan">
                    <span class="h2 d-block text-primary" id="nama_merk">
                        {{ company.nama_merek }}
                    </span>
                    <span class="h4 d-block text-secondary" id="nama_perusahaan">
                        {{ company.nama_perusahaan }}
                    </span>
                </div>
            </div>


            <div id="body">
                <div id="control_btn_container" class=""> <!--go_to_edit_mode, go_to_save_mode-->

                    <a id="photo_edit_link"
                       href="{%  url 'halaman_toko:edit_photos' %}?id={{ company.id|urlencode  }}"
                       style="visibility: collapse; "></a>
                    <button id="photo_edit_btn" class="control_btn" onclick="$('#photo_edit_link')[0].click();">
                        <i class="fa fa-file-image" aria-hidden="true"></i>
                    </button>


                    <button id="edit_btn" class="control_btn">
                        <i class="fa fa-pencil-alt" aria-hidden="true"></i>
                    </button>

                    <button id="save_btn" class="control_btn">
                        <i class="fas fa-save"></i>
                    </button>
                </div>


                <div id="photos_container" class="white_box shadowed_box_1">
                    <div id="company_photos_carousel" class="carousel  slide" data-bs-ride="carousel">
                        <div class="carousel-indicators">
                            {% for image in company_photos %}
                                <button type="button" data-bs-target="#company_photos_carousel"
                                        data-bs-slide-to="{{ forloop.counter0 }}"
                                        class="carousel-adaptive-background-component {% if image.img_index == 1 %}active{% endif %}"
                                        aria-current="true" aria-label="Slide {{ forloop.counter }}"
                                        style=""
                                ></button>
                            {% endfor %}


                        </div>
                        <div class="carousel-inner h-100">

                            {% for image in company_photos %}
                                <div class="carousel-item {% if image.img_index == 1 %}active{% endif %}">
                                    <div class="carousel-item-inner-wrapper-1">
                                    <div class="carousel-item-inner-wrapper-2">
                                        <div class="carousel-item-extra-background">

                                        </div>
                                        <div class="d-block w-100 company_photos_carousel_item_img"
                                             style="--company_photos_carousel_background_img: url('{{ image.img.url }}');" alt="First slide">
                                        </div>
                                    </div>
                                    </div>
                                </div>
                            {% endfor %}


                        </div>
                        <button class="carousel-control-prev"
                                type="button" data-bs-target="#company_photos_carousel" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next"
                                type="button" data-bs-target="#company_photos_carousel" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                        </button>
                    </div>
                </div>

                <div id="informasi_umum" class="">
                    <div class="atas white_box shadowed_box_1">
                        <div class="dummy"></div>

                        <div class="header" style="grid-row: 2;">
                            kode saham
                        </div>
                        <div class="value" style="grid-row: 4;">
                            {{ company.kode_saham }}
                        </div>


                        <div class="header" style="grid-row: 2;">
                            sisa waktu
                        </div>
                        <div style="grid-row: 4;">
                            <div class="value">
                                {{ company.end_date|number_of_days_from_today|ubah_jadi_bulan_atau_tahun_jika_perlu }}
                            </div>
                        </div>



                        <div class="header" style="grid-row: 2;">periode dividen</div>
                        <div class="value" style="grid-row: 4;">
                            {{ company.dividen }} bulan
                        </div>

                        <div class="dummy"></div>
                    </div>

                    <div class="tengah white_box shadowed_box_1">
                        <div class="dummy"></div>


                        <div>Status </div>
                        <div>
                            {% if company.is_verified %} terverifikasi {% else %} belum terverifikasi {% endif %}
                        </div>

                        <div>Berakhir pada </div>
                        <div>
                            {{ company.end_date|date:"d M Y" }}
                        </div>



                        <div>Jumlah lembar saham </div>
                        <div>
                            {{ company.jumlah_lembar|intcomma|chars_replace:",." }} lembar
                        </div>

                        <div>harga saham </div>
                        <div>
                            Rp{{ company.nilai_lembar_saham|intcomma|chars_replace:",." }},00
                        </div>

                        <div class="progress position-relative">
                            <div class="progress-bar bg-info" role="progressbar" style="width: 50%" aria-valuenow="50"
                                 aria-valuemin="0" aria-valuemax="100"></div>
                            <small class="progress-label justify-content-center d-flex position-absolute w-100">50%</small>
                        </div>

                        <div class="dummy"></div>
                    </div>

                    <div class="bawah white_box shadowed_box_1">
                        <div>
                            <div class="dummy"></div>
                            <span class="header">Saham Tersisa</span>
                            <div class="dummy"></div>

                            <span class="label">Persentase</span>
                            <span class="value">20 %</span>

                            <span class="label">Jumlah Lembar</span>
                            <span class="jumlah_lembar value">2000</span>

                            <span class="label">Total Rupiah</span>
                            <span class="value">Rp200.000.000,00</span>
                            <div class="dummy"></div>
                        </div>
                        <div>
                            <div class="dummy"></div>
                            <span class="header">Saham Terjual</span>
                            <div class="dummy"></div>

                            <span class="label">Persentase</span>
                            <span class="value">80 %</span>

                            <span class="label">Jumlah Lembar</span>
                            <span class="jumlah_lembar value">8000</span>

                            <span class="label">Total Rupiah</span>
                            <span class="value">Rp800.000.000,00</span>
                            <div class="dummy"></div>
                        </div>
                    </div>

{% comment %}
                    <div>Berakhir pada: </div><div>
                        {{ company.nilai_saham_dibutuhkan_total }}
                    </div>

                    <div>Berakhir pada: </div><div>
                        {{ company.nilai_saham_terkumpulkan_total }}
                    </div>
{% endcomment %}


                </div>


                <div id="entrepreneur_account_information_container" class="white_box shadowed_box_1">
                    <div class="entrepreneur_photo_profile_container">

                        <a id="entrepreneur-photo-profile-link" href="{{ owner_account.photo_profile.url }}"></a>
                        <div id="entrepreneur_photo_profile" style="--entrepreneur-photo-profile: url('{{ owner_account.photo_profile.url }}');"
                        onclick="$('#entrepreneur-photo-profile-link')[0].click()">

                        </div>
                    </div>
                    <div class="entrepreneur_additional_information_container">
                        <div class="entrepreneur_additional_information_wrapper">
                            <span id="entrepreneur_name" class="h3">{{ owner_account.first_name }} {{ owner_account.last_name }}</span>
                            <span id="entrepreneur_username" class="h6">@{{ owner_account.username }}</span>
                        </div>
                    </div>
                </div>

                <div class="download_proposal_container red_box shadowed_box_2_clickable">
                    <div class="download_proposal_icon">
                        <i class="proposal-icon" data-fa-symbol="proposal-icon" class="fas fa-book fa-fw"></i>
                        <img class="proposal-icon-svg" src="{% static '/fontawesome 5.15/svgs/solid/book.svg' %}"></img>
                    </div>
                    <div class="download_proposal_text_wrapper">
                        <span class="download_proposal_text h5">
                            Download Proposal
                        </span>
                    </div>
                </div>


                <div id="description_container" class="white_box shadowed_box_1">
                    <span class="h5">
                        deskripsi
                    </span>

                    {% comment %}
                    no need |linebreaksbr because we have handled it in the css
                    harus dalam baris yang sama karena whitespace tidak diabaikan oleh css tersebut       {% endcomment %}
                    <div id="company_description" onfocusout="company_description_KeyPress();">{{ company.deskripsi }}</div>
                </div>
            </div>


            <div id="foot">

            </div>
        </div>



        {% comment %}
        <!-- Button trigger modal -->
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
            Launch static backdrop modal
        </button>{% endcomment %}



        <!-- Modal -->
        <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-scrollable">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="staticBackdropLabel">Edit Page</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body" id="editing_form">




                        <form method="post">
                            <span class="h4">deskripsi</span> <br>
                            {{ edit_form.deskripsi }}
                        </form>


                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary">Understood</button>
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>